!function t(n,e,r){function i(u,a){if(!e[u]){if(!n[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var h=e[u]={exports:{}};n[u][0].call(h.exports,function(t){var e=n[u][1][t];return i(e?e:t)},h,h.exports,t,n,e,r)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,n,e){function r(t,n){function e(t){return t.x-d/2}function r(t){return t.y-v/2}function a(t){return 2*t.r}u();var h=s.select("#toppings"),l=decodeURIComponent(t),d=(decodeURIComponent(n),125),v=125,y=i([{imgurl:t,desc:n}],100);f(y);var g=o({toppingData:y,fitTo:{width:1024,height:960}});h.attr("transform",g);var m=h.selectAll(".topping").data(y,p()),_=m.enter().append("image").attr("xlink:href",l).attr("x",e).attr("y",r).attr("width",a).attr("height",a).classed("topping",!0);_.append("desc").text(p("desc")),0===c.roll(8)}function i(t,n){var e=[],r=5+c.rollDie(6);0===c.roll(4)&&(r+=c.rollDie(20));for(var i=0;r>i;++i){var o=c.pickFromArray(t);e.push({id:"topping-"+i,r:n/2+c.roll(n),imgurl:o.imgurl,desc:o.desc})}return e}function o(t){var n,e,r;t&&(n=t.toppingData,e=t.fitTo.width,r=t.fitTo.height);var i=r>e?e:r,o=i/2,u=l(n),a=o/u.r,c=11/24,s="translate("+e*c+", "+r*c+")";return s+=" scale("+a+")"}function u(){document.body.classList.add(v.roll())}var a=t("director"),c=t("probable"),s=t("d3-selection"),h=t("d3-hierarchy"),f=h.packSiblings,l=h.packEnclose,p=t("accessor"),d={"/topping/:imgurl/desc/:desc":r},v=c.createTableFromDef({"0-59":"background-white","60-89":"background-black","90-99":"background-overworld"});!function(){var t=a.Router(d);t.init()}()},{accessor:2,"d3-hierarchy":3,"d3-selection":4,director:5,probable:6}],2:[function(t,n,e){function r(t){var n="id";return t&&"string"==typeof t&&(n=t),function(t){return t[n]}}"object"==typeof n&&"object"==typeof n.exports&&(n.exports=r)},{}],3:[function(t,n,e){!function(t,r){"object"==typeof e&&"undefined"!=typeof n?r(e):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3_hierarchy=t.d3_hierarchy||{})}(this,function(t){"use strict";function n(t,n){return t.parent===n.parent?1:2}function e(t){return t.reduce(r,0)/t.length}function r(t,n){return t+n.x}function i(t){return 1+t.reduce(o,0)}function o(t,n){return Math.max(t,n.y)}function u(t){for(var n;n=t.children;)t=n[0];return t}function a(t){for(var n;n=t.children;)t=n[n.length-1];return t}function c(){function t(t){var n,h=0;t.eachAfter(function(t){var o=t.children;o?(t.x=e(o),t.y=i(o)):(t.x=n?h+=r(t,n):0,t.y=0,n=t)});var f=u(t),l=a(t),p=f.x-r(f,l)/2,d=l.x+r(l,f)/2;return t.eachAfter(s?function(n){n.x=(n.x-t.x)*o,n.y=(t.y-n.y)*c}:function(n){n.x=(n.x-p)/(d-p)*o,n.y=(1-(t.y?n.y/t.y:1))*c})}var r=n,o=1,c=1,s=!1;return t.separation=function(n){return arguments.length?(r=n,t):r},t.size=function(n){return arguments.length?(s=!1,o=+n[0],c=+n[1],t):s?null:[o,c]},t.nodeSize=function(n){return arguments.length?(s=!0,o=+n[0],c=+n[1],t):s?[o,c]:null},t}function s(t){var n,e,r,i,o=this,u=[o];do for(n=u.reverse(),u=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;i>r;++r)u.push(e[r]);while(u.length);return this}function h(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this}function f(t){for(var n,e,r,i=this,o=[i],u=[];i=o.pop();)if(u.push(i),n=i.children)for(e=0,r=n.length;r>e;++e)o.push(n[e]);for(;i=u.pop();)t(i);return this}function l(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function p(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function d(t){for(var n=this,e=v(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function v(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function y(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function g(){var t=[];return this.each(function(n){t.push(n)}),t}function m(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function _(t,n){var e,r,i,o,u,a=new E(t),c=+t.value&&(a.value=t.value),s=[a];for(null==n&&(n=w);e=s.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(u=i.length))for(e.children=new Array(u),o=u-1;o>=0;--o)s.push(r=e.children[o]=new E(i[o])),r.parent=e,r.depth=e.depth+1;return a.eachBefore(b)}function x(){return _(this).eachBefore(A)}function w(t){return t.children}function A(t){t.data=t.data.data}function b(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function E(t){this.data=t,this.depth=this.height=0,this.parent=null}function B(t){this._=t,this.next=null}function S(t){for(var n,e=(t=t.slice()).length,r=null,i=r;e;){var o=new B(t[e-1]);i=i?i.next=o:r=o,t[n]=t[--e]}return{head:r,tail:i}}function M(t){return z(S(t),[])}function k(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r-n.r;return i*i+1e-6>e*e+r*r}function z(t,n){var e,r,i,o=null,u=t.head;switch(n.length){case 1:e=O(n[0]);break;case 2:e=T(n[0],n[1]);break;case 3:e=C(n[0],n[1],n[2])}for(;u;)i=u._,r=u.next,e&&k(e,i)?o=u:(o?(t.tail=o,o.next=null):t.head=t.tail=null,n.push(i),e=z(t,n),n.pop(),t.head?(u.next=t.head,t.head=u):(u.next=null,t.head=t.tail=u),o=t.tail,o.next=r),u=r;return t.tail=o,e}function O(t){return{x:t.x,y:t.y,r:t.r}}function T(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,u=n.y,a=n.r,c=o-e,s=u-r,h=a-i,f=Math.sqrt(c*c+s*s);return{x:(e+o+c/f*h)/2,y:(r+u+s/f*h)/2,r:(f+i+a)/2}}function C(t,n,e){var r=t.x,i=t.y,o=t.r,u=n.x,a=n.y,c=n.r,s=e.x,h=e.y,f=e.r,l=2*(r-u),p=2*(i-a),d=2*(c-o),v=r*r+i*i-o*o-u*u-a*a+c*c,y=2*(r-s),g=2*(i-h),m=2*(f-o),_=r*r+i*i-o*o-s*s-h*h+f*f,x=y*p-l*g,w=(p*_-g*v)/x-r,A=(g*d-p*m)/x,b=(y*v-l*_)/x-i,E=(l*m-y*d)/x,B=A*A+E*E-1,S=2*(w*A+b*E+o),M=w*w+b*b-o*o,k=(-S-Math.sqrt(S*S-4*B*M))/(2*B);return{x:w+A*k+r,y:b+E*k+i,r:k}}function R(t,n,e){var r=t.x,i=t.y,o=n.r+e.r,u=t.r+e.r,a=n.x-r,c=n.y-i,s=a*a+c*c;if(s){var h=.5+((u*=u)-(o*=o))/(2*s),f=Math.sqrt(Math.max(0,2*o*(u+s)-(u-=s)*u-o*o))/(2*s);e.x=r+h*a+f*c,e.y=i+h*c-f*a}else e.x=r+u,e.y=i}function q(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return i*i>e*e+r*r}function D(t,n,e){var r=t.x-n,i=t.y-e;return r*r+i*i}function P(t){this._=t,this.next=null,this.previous=null}function j(t){if(!(i=t.length))return 0;var n,e,r,i;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;R(e,n,r=t[2]);var o,u,a,c,s,h,f,l=n.r*n.r,p=e.r*e.r,d=r.r*r.r,v=l+p+d,y=l*n.x+p*e.x+d*r.x,g=l*n.y+p*e.y+d*r.y;n=new P(n),e=new P(e),r=new P(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(a=3;i>a;++a){if(R(n._,e._,r=t[a]),r=new P(r),(s=n.previous)===(c=e.next)){if(q(c._,r._)){n=e,e=c,--a;continue t}}else{h=c._.r,f=s._.r;do if(f>=h){if(q(c._,r._)){e=c,n.next=e,e.previous=n,--a;continue t}c=c.next,h+=c._.r}else{if(q(s._,r._)){n=s,n.next=e,e.previous=n,--a;continue t}s=s.previous,f+=s._.r}while(c!==s.next)}for(r.previous=n,r.next=e,n.next=e.previous=e=r,v+=d=r._.r*r._.r,y+=d*r._.x,g+=d*r._.y,l=D(n._,o=y/v,u=g/v);(r=r.next)!==e;)(d=D(r._,o,u))<l&&(n=r,l=d);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=M(n),a=0;i>a;++a)n=t[a],n.x-=r.x,n.y-=r.y;return r.r}function L(t){return j(t),t}function N(t){return null==t?null:I(t)}function I(t){if("function"!=typeof t)throw new Error;return t}function H(){return 0}function F(t){return function(){return t}}function U(t){return Math.sqrt(t.value)}function V(){function t(t){return t.x=e/2,t.y=r/2,n?t.eachBefore(G(n)).eachAfter(X(i,.5)).eachBefore(Y(1)):t.eachBefore(G(U)).eachAfter(X(H,1)).eachAfter(X(i,t.r/Math.min(e,r))).eachBefore(Y(Math.min(e,r)/(2*t.r))),t}var n=null,e=1,r=1,i=H;return t.radius=function(e){return arguments.length?(n=N(e),t):n},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i="function"==typeof n?n:F(+n),t):i},t}function G(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function X(t,n){return function(e){if(r=e.children){var r,i,o,u=r.length,a=t(e)*n||0;if(a)for(i=0;u>i;++i)r[i].r+=a;if(o=j(r),a)for(i=0;u>i;++i)r[i].r-=a;e.r=o+a}}}function Y(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function Z(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function $(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(r-n)/t.value;++a<c;)o=u[a],o.y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s}function W(){function t(t){var u=t.height+1;return t.x0=t.y0=i,t.x1=e,t.y1=r/u,t.eachBefore(n(r,u)),o&&t.eachBefore(Z),t}function n(t,n){return function(e){e.children&&$(e,e.x0,t*(e.depth+1)/n,e.x1,t*(e.depth+2)/n);var r=e.x0,o=e.y0,u=e.x1-i,a=e.y1-i;r>u&&(r=u=(r+u)/2),o>a&&(o=a=(o+a)/2),e.x0=r,e.y0=o,e.x1=u,e.y1=a}}var e=1,r=1,i=0,o=!1;return t.round=function(n){return arguments.length?(o=!!n,t):o},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i=+n,t):i},t}function J(t){return t.id}function K(t){return t.parentId}function Q(){function t(t){var r,i,o,u,a,c,s,h=t.length,f=new Array(h),l={};for(i=0;h>i;++i)r=t[i],a=f[i]=new E(r),null!=(c=n(r,i,t))&&(c+="")&&(s=yt+(a.id=c),l[s]=s in l?mt:a);for(i=0;h>i;++i)if(a=f[i],c=e(t[i],i,t),null!=c&&(c+="")){if(u=l[yt+c],!u)throw new Error("missing: "+c);if(u===mt)throw new Error("ambiguous: "+c);u.children?u.children.push(a):u.children=[a],a.parent=u}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=gt,o.eachBefore(function(t){t.depth=t.parent.depth+1,--h}).eachBefore(b),o.parent=null,h>0)throw new Error("cycle");return o}var n=J,e=K;return t.id=function(e){return arguments.length?(n=I(e),t):n},t.parentId=function(n){return arguments.length?(e=I(n),t):e},t}function tt(t,n){return t.parent===n.parent?1:2}function nt(t){var n=t.children;return n?n[0]:t.t}function et(t){var n=t.children;return n?n[n.length-1]:t.t}function rt(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function it(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function ot(t,n,e){return t.a.parent===n.parent?t.a:e}function ut(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function at(t){for(var n,e,r,i,o,u=new ut(t,0),a=[u];n=a.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)a.push(e=n.children[i]=new ut(r[i],i)),e.parent=n;return(u.parent=new ut(null,0)).children=[u],u}function ct(){function t(t){var r=at(t);if(r.eachAfter(n),r.parent.m=-r.z,r.eachBefore(e),c)t.eachBefore(i);else{var s=t,h=t,f=t;t.eachBefore(function(t){t.x<s.x&&(s=t),t.x>h.x&&(h=t),t.depth>f.depth&&(f=t)});var l=s===h?1:o(s,h)/2,p=l-s.x,d=u/(h.x+l+p),v=a/(f.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*v})}return t}function n(t){var n=t.children,e=t.parent.children,i=t.i?e[t.i-1]:null;if(n){it(t);var u=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-u):t.z=u}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,n,e){if(n){for(var r,i=t,u=t,a=n,c=i.parent.children[0],s=i.m,h=u.m,f=a.m,l=c.m;a=et(a),i=nt(i),a&&i;)c=nt(c),u=et(u),u.a=t,r=a.z+f-i.z-s+o(a._,i._),r>0&&(rt(ot(a,t,e),t,r),s+=r,h+=r),f+=a.m,s+=i.m,l+=c.m,h+=u.m;a&&!et(u)&&(u.t=a,u.m+=f-h),i&&!nt(c)&&(c.t=i,c.m+=s-l,e=t)}return e}function i(t){t.x*=u,t.y=t.depth*a}var o=tt,u=1,a=1,c=null;return t.separation=function(n){return arguments.length?(o=n,t):o},t.size=function(n){return arguments.length?(c=!1,u=+n[0],a=+n[1],t):c?null:[u,a]},t.nodeSize=function(n){return arguments.length?(c=!0,u=+n[0],a=+n[1],t):c?[u,a]:null},t}function st(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(i-e)/t.value;++a<c;)o=u[a],o.x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s}function ht(t,n,e,r,i){for(var o,u,a,c,s=t._squarify,h=-1,f=s.length,l=t.value;++h<f;){for(o=s[h],u=o.children,a=o.value=0,c=u.length;c>a;++a)o.value+=u[a].value;o.dice?$(o,n,e,r,e+=(i-e)*o.value/l):st(o,n,e,n+=(r-n)*o.value/l,i),l-=o.value}}function ft(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(n),u=[0],r&&t.eachBefore(Z),t}function n(t){var n=u[t.depth],r=t.x0+n,i=t.y0+n,o=t.x1-n,l=t.y1-n;r>o&&(r=o=(r+o)/2),i>l&&(i=l=(i+l)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=l,t.children&&(n=u[t.depth+1]=a(t)/2,r+=f(t)-n,i+=c(t)-n,o-=s(t)-n,l-=h(t)-n,r>o&&(r=o=(r+o)/2),i>l&&(i=l=(i+l)/2),e(t,r,i,o,l))}var e=_t,r=!1,i=1,o=1,u=[0],a=H,c=H,s=H,h=H,f=H;return t.round=function(n){return arguments.length?(r=!!n,t):r},t.size=function(n){return arguments.length?(i=+n[0],o=+n[1],t):[i,o]},t.tile=function(n){return arguments.length?(e=I(n),t):e},t.padding=function(n){return arguments.length?t.paddingInner(n).paddingOuter(n):t.paddingInner()},t.paddingInner=function(n){return arguments.length?(a="function"==typeof n?n:F(+n),t):a},t.paddingOuter=function(n){return arguments.length?t.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):t.paddingTop()},t.paddingTop=function(n){return arguments.length?(c="function"==typeof n?n:F(+n),t):c},t.paddingRight=function(n){return arguments.length?(s="function"==typeof n?n:F(+n),t):s},t.paddingBottom=function(n){return arguments.length?(h="function"==typeof n?n:F(+n),t):h},t.paddingLeft=function(n){return arguments.length?(f="function"==typeof n?n:F(+n),t):f},t}function lt(t,n,e,r,i){var o=t.children;pt(o,0,o.length,t.value,n,e,r,i)}function pt(t,n,e,r,i,o,u,a){if(n>=e-1)return t=t[n],t.x0=i,t.y0=o,t.x1=u,t.y1=a,void 0;var c=n,s=r/2,h=0;do h+=t[c].value;while(++c<e-1&&s>h);var f=r-h;if(a-o>u-i){var l=(o*f+a*h)/r;pt(t,n,c,h,i,o,u,l),pt(t,c,e,f,i,l,u,a)}else{var p=(i*f+u*h)/r;pt(t,n,c,h,i,o,p,a),pt(t,c,e,f,p,o,u,a)}}function dt(t,n,e,r,i){(1&t.depth?st:$)(t,n,e,r,i)}var vt="0.2.2";E.prototype=_.prototype={constructor:E,each:s,eachAfter:f,eachBefore:h,sum:l,sort:p,path:d,ancestors:y,descendants:g,leaves:m,copy:x};var yt="$",gt={depth:-1},mt={};ut.prototype=Object.create(E.prototype);var _t=function xt(t){function n(n,e,r,i,o){if(n._squarify)return ht(n,e,r,i,o);for(var u,a,c,s,h,f,l,p,d,v,y,g,m=n._squarify=[],_=n.children,x=0,w=_.length,A=n.value;w>x;){for(s=i-e,h=o-r,l=p=f=_[x].value,y=Math.max(h/s,s/h)/(A*t),g=f*f*y,v=Math.max(p/g,g/l),c=x+1;w>c;++c){if(f+=a=_[c].value,l>a&&(l=a),a>p&&(p=a),g=f*f*y,d=Math.max(p/g,g/l),d>v){f-=a;break}v=d}m.push(u={value:f,dice:h>s,children:_.slice(x,c)}),u.dice?$(u,e,r,i,A?r+=h*f/A:o):st(u,e,r,A?e+=s*f/A:i,o),A-=f,x=c}}return n.ratio=function(t){return xt((t=+t)>1?t:1)},n}((1+Math.sqrt(5))/2,!1);t.version=vt,t.cluster=c,t.hierarchy=_,t.pack=V,t.packSiblings=L,t.packEnclose=M,t.partition=W,t.stratify=Q,t.tree=ct,t.treemap=ft,t.treemapBinary=lt,t.treemapDice=$,t.treemapSlice=st,t.treemapSliceDice=dt,t.treemapSquarify=_t})},{}],4:[function(t,n,e){!function(t,r){"object"==typeof e&&"undefined"!=typeof n?r(e):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3_selection=t.d3_selection||{})}(this,function(t){"use strict";function n(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Nt.hasOwnProperty(n)?{space:Nt[n],local:t}:t}function e(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Lt&&n.documentElement.namespaceURI===Lt?n.createElement(t):n.createElementNS(e,t)}}function r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i(t){var i=n(t);return(i.local?r:e)(i)}function o(t,n,e){return t=u(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function u(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function a(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}function c(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;o>r;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function s(t,n,e){var r=Vt.hasOwnProperty(t.type)?o:u;return function(i,o,u){var a,c=this.__on,s=r(n,o,u);if(c)for(var h=0,f=c.length;f>h;++h)if((a=c[h]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=e),void(a.value=n);this.addEventListener(t.type,s,e),a={type:t.type,name:t.name,value:n,listener:s,capture:e},c?c.push(a):this.__on=[a]}}function h(t,n,e){var r,i,o=a(t+""),u=o.length;{if(!(arguments.length<2)){for(h=n?s:c,null==e&&(e=!1),r=0;u>r;++r)this.each(h(o[r],n,e));return this}var h=this.node().__on;if(h)for(var f,l=0,p=h.length;p>l;++l)for(r=0,f=h[l];u>r;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value}}function f(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e}function l(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function p(t,n){return null==n&&(n=f()),n.changedTouches&&(n=n.changedTouches[0]),l(t,n)}function d(t){return function(){return this.querySelector(t)}}function v(t){"function"!=typeof t&&(t=d(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;e>i;++i)for(var o,u,a=n[i],c=a.length,s=r[i]=new Array(c),h=0;c>h;++h)(o=a[h])&&(u=t.call(o,o.__data__,h,a))&&("__data__"in o&&(u.__data__=o.__data__),s[h]=u);return new Tt(r,this._parents)}function y(t){return function(){return this.querySelectorAll(t)}}function g(t){"function"!=typeof t&&(t=y(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;e>o;++o)for(var u,a=n[o],c=a.length,s=0;c>s;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new Tt(r,i)}function m(t){"function"!=typeof t&&(t=Ut(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;e>i;++i)for(var o,u=n[i],a=u.length,c=r[i]=new Array(a),s=0;a>s;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&(c[s]=o);return new Tt(r,this._parents)}function _(t){return function(){return t}}function x(t,n,e,r,i,o){for(var u,a=0,c=n.length,s=o.length;s>a;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new b(t,o[a]);for(;c>a;++a)(u=n[a])&&(i[a]=u)}function w(t,n,e,r,i,o,u){var a,c,s,h={},f=n.length,l=o.length,p=new Array(f);for(a=0;f>a;++a)(c=n[a])&&(p[a]=s=Xt+u.call(c,c.__data__,a,n),h[s]||(h[s]=c));for(a=0;l>a;++a)s=Xt+u.call(t,o[a],a,o),(c=h[s])?c!==!0&&(r[a]=c,c.__data__=o[a]):e[a]=new b(t,o[a]),h[s]=!0;for(a=0;f>a;++a)(c=n[a])&&h[p[a]]!==!0&&(i[a]=c)}function A(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var e=n?w:x,r=this._parents,i=this._groups;"function"!=typeof t&&(t=_(t));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;o>s;++s){var h=r[s],f=i[s],l=f.length,p=t.call(h,h&&h.__data__,s,r),d=p.length,v=a[s]=new Array(d),y=u[s]=new Array(d),g=c[s]=new Array(l);e(h,f,v,y,g,p,n);for(var m,A,b=0,E=0;d>b;++b)if(m=v[b]){for(b>=E&&(E=b+1);!(A=y[E])&&++E<d;);m._next=A||null}}return u=new Tt(u,r),u._enter=a,u._exit=c,u}function b(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function E(t){return new Array(t.length)}function B(){return new Tt(this._enter||this._groups.map(E),this._parents)}function S(){return new Tt(this._exit||this._groups.map(E),this._parents)}function M(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;o>a;++a)for(var c,s=n[a],h=e[a],f=s.length,l=u[a]=new Array(f),p=0;f>p;++p)(c=s[p]||h[p])&&(l[p]=c);for(;r>a;++a)u[a]=n[a];return new Tt(u,this._parents)}function k(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this}function z(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=O);for(var e=this._groups,r=e.length,i=new Array(r),o=0;r>o;++o){for(var u,a=e[o],c=a.length,s=i[o]=new Array(c),h=0;c>h;++h)(u=a[h])&&(s[h]=u);s.sort(n)}return new Tt(i,this._parents).order()}function O(t,n){return n>t?-1:t>n?1:t>=n?0:NaN}function T(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function C(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t}function R(){for(var t=this._groups,n=0,e=t.length;e>n;++n)for(var r=t[n],i=0,o=r.length;o>i;++i){var u=r[i];if(u)return u}return null}function q(){var t=0;return this.each(function(){++t}),t}function D(){return!this.node()}function P(t){for(var n=this._groups,e=0,r=n.length;r>e;++e)for(var i,o=n[e],u=0,a=o.length;a>u;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this}function j(t){return function(){this.removeAttribute(t)}}function L(t){return function(){this.removeAttributeNS(t.space,t.local)}}function N(t,n){return function(){this.setAttribute(t,n)}}function I(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function H(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function F(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function U(t,e){var r=n(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==e?r.local?L:j:"function"==typeof e?r.local?F:H:r.local?I:N)(r,e))}function V(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function G(t){return function(){this.style.removeProperty(t)}}function X(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Y(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Z(t,n,e){var r;return arguments.length>1?this.each((null==n?G:"function"==typeof n?Y:X)(t,n,null==e?"":e)):V(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)}function $(t){return function(){delete this[t]}}function W(t,n){return function(){this[t]=n}}function J(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function K(t,n){return arguments.length>1?this.each((null==n?$:"function"==typeof n?J:W)(t,n)):this.node()[t]}function Q(t){return t.trim().split(/^|\s+/)}function tt(t){return t.classList||new nt(t)}function nt(t){this._node=t,this._names=Q(t.getAttribute("class")||"")}function et(t,n){for(var e=tt(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function rt(t,n){for(var e=tt(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function it(t){return function(){et(this,t)}}function ot(t){return function(){rt(this,t)}}function ut(t,n){return function(){(n.apply(this,arguments)?et:rt)(this,t)}}function at(t,n){var e=Q(t+"");if(arguments.length<2){for(var r=tt(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?ut:n?it:ot)(e,n))}function ct(){this.textContent=""}function st(t){return function(){this.textContent=t}}function ht(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function ft(t){return arguments.length?this.each(null==t?ct:("function"==typeof t?ht:st)(t)):this.node().textContent}function lt(){this.innerHTML=""}function pt(t){return function(){this.innerHTML=t}}function dt(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function vt(t){return arguments.length?this.each(null==t?lt:("function"==typeof t?dt:pt)(t)):this.node().innerHTML}function yt(){this.parentNode.appendChild(this)}function gt(){return this.each(yt)}function mt(){this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _t(){return this.each(mt)}function xt(t){return function(){return this.appendChild(t.apply(this,arguments))}}function wt(t,n){return function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)}}function At(){return null}function bt(t,n){var e="function"==typeof t?t:i(t);return this.select(arguments.length<2?xt(e):wt(e,null==n?At:"function"==typeof n?n:d(n)))}function Et(){var t=this.parentNode;t&&t.removeChild(this)}function Bt(){return this.each(Et)}function St(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Mt(t,n,e){var r=V(t),i=r.CustomEvent;i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function kt(t,n){return function(){return Mt(this,t,n)}}function zt(t,n){return function(){return Mt(this,t,n.apply(this,arguments))}}function Ot(t,n){return this.each(("function"==typeof n?zt:kt)(t,n))}function Tt(t,n){this._groups=t,this._parents=n}function Ct(){return new Tt([[document.documentElement]],Yt)}function Rt(t){return"string"==typeof t?new Tt([[document.querySelector(t)]],[document.documentElement]):new Tt([[t]],Yt)}function qt(t){return"string"==typeof t?new Tt([document.querySelectorAll(t)],[document.documentElement]):new Tt([t],Yt)}function Dt(t,n,e){arguments.length<3&&(e=n,n=f().changedTouches);for(var r,i=0,o=n?n.length:0;o>i;++i)if((r=n[i]).identifier===e)return l(t,r);return null}function Pt(t,n){null==n&&(n=f().touches);for(var e=0,r=n?n.length:0,i=new Array(r);r>e;++e)i[e]=l(t,n[e]);return i}var jt="0.7.1",Lt="http://www.w3.org/1999/xhtml",Nt={svg:"http://www.w3.org/2000/svg",xhtml:Lt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},It=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var Ht=document.documentElement;if(!Ht.matches){var Ft=Ht.webkitMatchesSelector||Ht.msMatchesSelector||Ht.mozMatchesSelector||Ht.oMatchesSelector;It=function(t){return function(){return Ft.call(this,t)}}}}var Ut=It,Vt={};if(t.event=null,"undefined"!=typeof document){var Gt=document.documentElement;"onmouseenter"in Gt||(Vt={mouseenter:"mouseover",mouseleave:"mouseout"})}var Xt="$";b.prototype={constructor:b,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},nt.prototype={add:function(t){var n=this._names.indexOf(t);0>n&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Yt=[null];Tt.prototype=Ct.prototype={constructor:Tt,select:v,selectAll:g,filter:m,data:A,enter:B,exit:S,merge:M,order:k,sort:z,call:T,nodes:C,node:R,size:q,empty:D,each:P,attr:U,style:Z,property:K,classed:at,text:ft,html:vt,raise:gt,lower:_t,append:bt,remove:Bt,datum:St,on:h,dispatch:Ot},t.version=jt,t.creator=i,t.matcher=Ut,t.mouse=p,t.namespace=n,t.namespaces=Nt,t.select=Rt,t.selectAll=qt,t.selection=Ct,t.selector=d,t.selectorAll=y,t.touch=Dt,t.touches=Pt,t.window=V})},{}],5:[function(t,n,e){!function(t){function n(){return""===c.hash||"#"===c.hash}function e(t,n){for(var e=0;e<t.length;e+=1)if(n(t[e],e,t)===!1)return}function r(t){for(var n=[],e=0,r=t.length;r>e;e++)n=n.concat(t[e]);return n}function i(t,n,e){if(!t.length)return e();var r=0;!function i(){n(t[r],function(n){n||n===!1?(e(n),e=function(){}):(r+=1,r===t.length?e():i())})}()}function o(t,n,e){e=t;for(var r in n)if(n.hasOwnProperty(r)&&(e=n[r](t),e!==t))break;return e===t?"([._a-zA-Z0-9-%()]+)":e}function u(t,n){for(var e,r=0,i="";e=t.substr(r).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)r=e.index+e[0].length,e[0]=e[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),i+=t.substr(0,e.index)+e[0];t=i+=t.substr(r);var u,a,c=t.match(/:([^\/]+)/gi);if(c){a=c.length;for(var s=0;a>s;s++)u=c[s],t="::"===u.slice(0,2)?u.slice(1):t.replace(u,o(u,n))}return t}function a(t,n,e,r){var i,o=0,u=0,a=0,e=(e||"(").toString(),r=(r||")").toString();for(i=0;i<t.length;i++){var c=t[i];if(c.indexOf(e,o)>c.indexOf(r,o)||~c.indexOf(e,o)&&!~c.indexOf(r,o)||!~c.indexOf(e,o)&&~c.indexOf(r,o)){if(u=c.indexOf(e,o),a=c.indexOf(r,o),~u&&!~a||!~u&&~a){var s=t.slice(0,(i||1)+1).join(n);t=[s].concat(t.slice((i||1)+1))}o=(a>u?a:u)+1,i=0}else o=0}return t}var c=document.location,h={mode:"modern",hash:c.hash,history:!1,check:function(){var t=c.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,n){function e(t){for(var n=0,e=f.listeners.length;e>n;n++)f.listeners[n](t)}var r=this;if(this.history=n,f.listeners||(f.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=e},500):window.onhashchange=e,this.mode="modern";else{var i=document.createElement("iframe");i.id="state-frame",i.style.display="none",document.body.appendChild(i),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&r.check()}),window.setInterval(function(){r.check()},50),this.onHashChanged=e,this.mode="legacy"}return f.listeners.push(t),this.mode},destroy:function(t){if(f&&f.listeners)for(var n=f.listeners,e=n.length-1;e>=0;e--)n[e]===t&&n.splice(e,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):c.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var n=document.getElementById("state-frame"),e=n.contentDocument||n.contentWindow.document;e.open(),e.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),e.close()},syncHash:function(){var t=this._hash;return t!=c.hash&&(c.hash=t),this},onHashChanged:function(){}},f=t.Router=function(t){return this instanceof f?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),void this.mount(t||{})):new f(t)};f.prototype.init=function(t){var e,r=this;return this.handler=function(t){var n=t&&t.newURL||window.location.hash,e=r.history===!0?r.getPath():n.replace(/.*#/,"");r.dispatch("on","/"===e.charAt(0)?e:"/"+e)},h.init(this.handler,this.history),this.history===!1?n()&&t?c.hash=t:n()||r.dispatch("on","/"+c.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(e=n()&&t?t:n()?null:c.hash.replace(/^#/,""),e&&window.history.replaceState({},document.title,e)):e=this.getPath(),(e||this.run_in_init===!0)&&this.handler()),this},f.prototype.explode=function(){var t=this.history===!0?this.getPath():c.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},f.prototype.setRoute=function(t,n,e){var r=this.explode();return"number"==typeof t&&"string"==typeof n?r[t]=n:"string"==typeof e?r.splice(t,n,s):r=[t],h.setHash(r.join("/")),r},f.prototype.insertEx=function(t,n,e,r){return"once"===t&&(t="on",e=function(t){var n=!1;return function(){return n?void 0:(n=!0,t.apply(this,arguments))}}(e)),this._insert(t,n,e,r)},f.prototype.getRoute=function(t){var n=t;if("number"==typeof t)n=this.explode()[t];else if("string"==typeof t){var e=this.explode();n=e.indexOf(t)}else n=this.explode();return n},f.prototype.destroy=function(){return h.destroy(this.handler),this},f.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t};var l=/\?.*/;f.prototype.configure=function(t){t=t||{};for(var n=0;n<this.methods.length;n++)this._methods[this.methods[n]]=!0;return this.recurse=t.recurse||this.recurse||!1,
this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&t.convert_hash_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},f.prototype.param=function(t,n){":"!==t[0]&&(t=":"+t);var e=new RegExp(t,"g");return this.params[t]=function(t){return t.replace(e,n.source||n)},this},f.prototype.on=f.prototype.route=function(t,n,e){var r=this;return e||"function"!=typeof n||(e=n,n=t,t="on"),Array.isArray(n)?n.forEach(function(n){r.on(t,n,e)}):(n.source&&(n=n.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){r.on(t.toLowerCase(),n,e)}):(n=n.split(new RegExp(this.delimiter)),n=a(n,this.delimiter),void this.insert(t,this.scope.concat(n),e)))},f.prototype.path=function(t,n){var e=this.scope.length;t.source&&(t=t.source.replace(/\\\//gi,"/")),t=t.split(new RegExp(this.delimiter)),t=a(t,this.delimiter),this.scope=this.scope.concat(t),n.call(this,this),this.scope.splice(e,t.length)},f.prototype.dispatch=function(t,n,e){function r(){o.last=u.after,o.invoke(o.runlist(u),o,e)}var i,o=this,u=this.traverse(t,n.replace(l,""),this.routes,""),a=this._invoked;return this._invoked=!0,u&&0!==u.length?("forward"===this.recurse&&(u=u.reverse()),i=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],i&&i.length>0&&a?(this.async?this.invoke(i,this,r):(this.invoke(i,this),r()),!0):(r(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:n},e),!1)},f.prototype.invoke=function(t,n,r){var o,u=this;this.async?(o=function(e,r){return Array.isArray(e)?i(e,o,r):void("function"==typeof e&&e.apply(n,(t.captures||[]).concat(r)))},i(t,o,function(){r&&r.apply(n,arguments)})):(o=function(r){return Array.isArray(r)?e(r,o):"function"==typeof r?r.apply(n,t.captures||[]):void("string"==typeof r&&u.resource&&u.resource[r].apply(n,t.captures||[]))},e(t,o))},f.prototype.traverse=function(t,n,e,r,i){function o(t){function n(t){for(var e=[],r=0;r<t.length;r++)e[r]=Array.isArray(t[r])?n(t[r]):t[r];return e}function e(t){for(var n=t.length-1;n>=0;n--)Array.isArray(t[n])?(e(t[n]),0===t[n].length&&t.splice(n,1)):i(t[n])||t.splice(n,1)}if(!i)return t;var r=n(t);return r.matched=t.matched,r.captures=t.captures,r.after=t.after.filter(i),e(r),r}var u,a,c,s,h=[];if(n===this.delimiter&&e[t])return s=[[e.before,e[t]].filter(Boolean)],s.after=[e.after].filter(Boolean),s.matched=!0,s.captures=[],o(s);for(var f in e)if(e.hasOwnProperty(f)&&(!this._methods[f]||this._methods[f]&&"object"==typeof e[f]&&!Array.isArray(e[f]))){if(u=a=r+this.delimiter+f,this.strict||(a+="["+this.delimiter+"]?"),c=n.match(new RegExp("^"+a)),!c)continue;if(c[0]&&c[0]==n&&e[f][t])return s=[[e[f].before,e[f][t]].filter(Boolean)],s.after=[e[f].after].filter(Boolean),s.matched=!0,s.captures=c.slice(1),this.recurse&&e===this.routes&&(s.push([e.before,e.on].filter(Boolean)),s.after=s.after.concat([e.after].filter(Boolean))),o(s);if(s=this.traverse(t,n,e[f],u),s.matched)return s.length>0&&(h=h.concat(s)),this.recurse&&(h.push([e[f].before,e[f].on].filter(Boolean)),s.after=s.after.concat([e[f].after].filter(Boolean)),e===this.routes&&(h.push([e.before,e.on].filter(Boolean)),s.after=s.after.concat([e.after].filter(Boolean)))),h.matched=!0,h.captures=s.captures,h.after=s.after,o(h)}return!1},f.prototype.insert=function(t,n,e,r){var i,o,a,c,s;if(n=n.filter(function(t){return t&&t.length>0}),r=r||this.routes,s=n.shift(),/\:|\*/.test(s)&&!/\\d|\\w/.test(s)&&(s=u(s,this.params)),n.length>0)return r[s]=r[s]||{},this.insert(t,n,e,r[s]);if(s||n.length||r!==this.routes){if(o=typeof r[s],a=Array.isArray(r[s]),r[s]&&!a&&"object"==o)switch(i=typeof r[s][t]){case"function":return void(r[s][t]=[r[s][t],e]);case"object":return void r[s][t].push(e);case"undefined":return void(r[s][t]=e)}else if("undefined"==o)return c={},c[t]=e,void(r[s]=c);throw new Error("Invalid route context: "+o)}switch(i=typeof r[t]){case"function":return void(r[t]=[r[t],e]);case"object":return void r[t].push(e);case"undefined":return void(r[t]=e)}},f.prototype.extend=function(t){function n(t){r._methods[t]=!0,r[t]=function(){var n=1===arguments.length?[t,""]:[t];r.on.apply(r,n.concat(Array.prototype.slice.call(arguments)))}}var e,r=this,i=t.length;for(e=0;i>e;e++)n(t[e])},f.prototype.runlist=function(t){var n=this.every&&this.every.before?[this.every.before].concat(r(t)):r(t);return this.every&&this.every.on&&n.push(this.every.on),n.captures=t.captures,n.source=t.source,n},f.prototype.mount=function(t,n){function e(n,e){var i=n,o=n.split(r.delimiter),u=typeof t[n],c=""===o[0]||!r._methods[o[0]],s=c?"on":i;return c&&(i=i.slice((i.match(new RegExp("^"+r.delimiter))||[""])[0].length),o.shift()),c&&"object"===u&&!Array.isArray(t[n])?(e=e.concat(o),void r.mount(t[n],e)):(c&&(e=e.concat(i.split(r.delimiter)),e=a(e,r.delimiter)),void r.insert(s,e,t[n]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var r=this;n=n||[],Array.isArray(n)||(n=n.split(r.delimiter));for(var i in t)t.hasOwnProperty(i)&&e(i,n.slice(0))}}}("object"==typeof e?e:window)},{}],6:[function(t,n,e){function r(t){function n(t){return Math.floor(_()*t)}function e(t){return 0===t?0:n(t)+1}function r(t){function e(t){return i(u,t)}function r(){var t=e(n(a));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()}function o(){return u}var u=t,a=u[u.length-1][0][1]-u[0][0][0]+1;return{outcomeAtIndex:e,roll:r,length:a,getRangesAndOutcomesArray:o}}function i(t,n){n=+n;for(var e=0;e<t.length;++e){var r=t[e],i=r[0];if(n>=i[0]&&n<=i[1])return r[1]}}function o(t){return r(u(t))}function u(t){var n=[],e=-1,r=a(t);return r=r.sort(c),r.forEach(function(t){var r=t[0],i=t[1],o=e+1,u=o+r-1;n.push([[o,u],i]),e=u}),n}function a(t){var n=[];for(var e in t){var r=t[e];n.push([r,e])}return n}function c(t,n){return t[0]>n[0]?-1:1}function s(t){var n=h(t);return r(n)}function h(t){var n=[];for(var e in t){var r=l(e),i=t[e];if("object"==typeof i)if(Array.isArray(i))i=d(i);else{var o=s(i);"function"==typeof o.roll&&(i=o.roll)}n.push([r,i])}return n.sort(f)}function f(t,n){return t[0][0]<n[0][0]?-1:1}function l(t){var n=t.split("-");return n.length>2?void 0:1===n.length?[+t,+t]:[+n[0],+n[1]]}function p(t,e){return!t||"number"!=typeof t.length||t.length<1?e:t[n(t.length)]}function d(t,n){return function(){return p(t,n)}}function v(t,n){var e=[];return t.forEach(function(t){n.forEach(function(n){Array.isArray(t)||Array.isArray(n)?e.push(t.concat(n)):e.push([t,n])})}),e}function y(t){return t.slice(1).reduce(v,t[0])}function g(t){for(var e,r=t.length,i=Array(r),o=0;r>o;o++)e=n(o+1),e!==o&&(i[o]=i[e]),i[e]=t[o];return i}function m(t,n){return g(t).slice(0,n)}var _=Math.random;return t&&t.random&&(_=t.random),{roll:n,rollDie:e,createRangeTable:r,createRangeTableFromDict:o,createTableFromDef:s,convertDictToRangesAndOutcomePairs:u,pickFromArray:p,crossArrays:v,getCartesianProduct:y,shuffle:g,sample:m}}var i=r();"object"==typeof n&&(n.exports=i,n.exports.createProbable=r)},{}]},{},[1]);