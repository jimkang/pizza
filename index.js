!function o(u,a,c){function s(n,t){if(!a[n]){if(!u[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(h)return h(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[n]={exports:{}};u[n][0].call(i.exports,function(t){return s(u[n][1][t]||t)},i,i.exports,o,u,a,c)}return a[n].exports}for(var h="function"==typeof require&&require,t=0;t<c.length;t++)s(c[t]);return s}({1:[function(t,n,e){var r=t("director"),a=t("probable"),c=t("d3-selection"),i=t("d3-hierarchy"),s=i.packSiblings,h=i.packEnclose,f=t("accessor"),o={"/topping/:imgurl/desc/:desc":function(t,n){document.body.classList.add(l.roll());var e=c.select("#toppings"),r=decodeURIComponent(t),i=(decodeURIComponent(n),function(t,n){var e=[],r=5+a.rollDie(6);0===a.roll(4)&&(r+=a.rollDie(20));for(var i=0;i<r;++i){var o=a.pickFromArray(t);e.push({id:"topping-"+i,r:n/2+a.roll(n),imgurl:o.imgurl,desc:o.desc,rotation:a.roll(360)})}return e}([{imgurl:t,desc:n}],100));s(i);var o=function(t){var n,e,r;t&&(n=t.toppingData,e=t.fitTo.width,r=t.fitTo.height);var i=(e<r?e:r)/2,o=h(n),u=i/o.r,a="translate("+.5*e+", "+.5*r+")";return a+=" scale("+u+")"}({toppingData:i,fitTo:{width:1024,height:960}});function u(t){return 2*t.r}e.attr("transform",o),e.selectAll(".topping").data(i,f()).enter().append("image").attr("xlink:href",r).attr("x",function(t){return t.x-62.5}).attr("y",function(t){return t.y-62.5}).attr("width",u).attr("height",u).attr("transform",function(t){return"rotate("+t.rotation+" "+t.x+" "+t.y+")"}).classed("topping",!0).append("desc").text(f("desc"))}},l=a.createTableFromDef({"0-59":"background-white","60-89":"background-black","90-99":"background-overworld"});r.Router(o).init()},{accessor:2,"d3-hierarchy":3,"d3-selection":4,director:5,probable:6}],2:[function(t,n,e){function r(t){return t}"object"==typeof n&&"object"==typeof n.exports&&(n.exports=function(t,n){var e="id";return"identity"===t?r:(t&&"string"==typeof t&&(e=t),function(t){return"object"!=typeof t?n:void 0===t[e]?n:t[e]})})},{}],3:[function(t,n,e){var r,i;r=this,i=function(t){"use strict";function e(t,n){return t.parent===n.parent?1:2}function f(t,n){return t+n.x}function l(t,n){return Math.max(t,n.y)}function n(t,n){var e,r,i,o,u,a=new d(t),c=+t.value&&(a.value=t.value),s=[a];for(null==n&&(n=h);e=s.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(u=i.length))for(e.children=new Array(u),o=u-1;0<=o;--o)s.push(r=e.children[o]=new d(i[o])),r.parent=e,r.depth=e.depth+1;return a.eachBefore(p)}function h(t){return t.children}function r(t){t.data=t.data.data}function p(t){for(var n=0;t.height=n,(t=t.parent)&&t.height<++n;);}function d(t){this.data=t,this.depth=this.height=0,this.parent=null}function o(t){this._=t,this.next=null}function m(t){return function t(n,e){var r,i,o,u=null,a=n.head;switch(e.length){case 1:Z=e[0],r={x:Z.x,y:Z.y,r:Z.r};break;case 2:j=e[0],L=e[1],N=j.x,I=j.y,H=j.r,F=L.x,U=L.y,V=L.r,G=F-N,X=U-I,$=V-H,Y=Math.sqrt(G*G+X*X),r={x:(N+F+G/Y*$)/2,y:(I+U+X/Y*$)/2,r:(Y+H+V)/2};break;case 3:c=e[0],s=e[1],h=e[2],f=c.x,l=c.y,p=c.r,d=s.x,v=s.y,y=s.r,g=h.x,m=h.y,_=h.r,C=(O=((S=2*(l-m))*(A=2*(y-p))-(w=2*(l-v))*(B=2*(_-p)))/(k=(E=2*(f-g))*w-(x=2*(f-d))*S))*O+(R=(x*B-E*A)/k)*R-1,D=(z=(w*(M=f*f+l*l-p*p-g*g-m*m+_*_)-S*(b=f*f+l*l-p*p-d*d-v*v+y*y))/k-f)*z+(T=(E*b-x*M)/k-l)*T-p*p,P=(-(q=2*(z*O+T*R+p))-Math.sqrt(q*q-4*C*D))/(2*C),r={x:z+O*P+f,y:T+R*P+l,r:P}}var c,s,h,f,l,p,d,v,y,g,m,_,x,w,A,b,E,S,B,M,k,z,O,T,R,C,q,D,P;var j,L,N,I,H,F,U,V,G,X,$,Y;var Z;for(;a;)o=a._,i=a.next,r&&(W=r,void 0,K=(J=o).x-W.x,Q=J.y-W.y,tt=W.r-J.r,K*K+Q*Q<tt*tt+1e-6)?u=a:(u?(n.tail=u).next=null:n.head=n.tail=null,e.push(o),r=t(n,e),e.pop(),n.head?(a.next=n.head,n.head=a):(a.next=null,n.head=n.tail=a),(u=n.tail).next=i),a=i;var W,J,K,Q,tt;n.tail=u;return r}(function(t){for(var n=(t=t.slice()).length,e=null,r=e;n;){var i=new o(t[n-1]);r=r?r.next=i:e=i,t[void 0]=t[--n]}return{head:e,tail:r}}(t),[])}function _(t,n,e){var r=t.x,i=t.y,o=n.r+e.r,u=t.r+e.r,a=n.x-r,c=n.y-i,s=a*a+c*c;if(s){var h=.5+((u*=u)-(o*=o))/(2*s),f=Math.sqrt(Math.max(0,2*o*(u+s)-(u-=s)*u-o*o))/(2*s);e.x=r+h*a+f*c,e.y=i+h*c-f*a}else e.x=r+u,e.y=i}function x(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return e*e+r*r<i*i}function w(t,n,e){var r=t.x-n,i=t.y-e;return r*r+i*i}function A(t){this._=t,this.next=null,this.previous=null}function c(t){if(!(i=t.length))return 0;var n,e,r,i;if((n=t[0]).x=0,n.y=0,!(1<i))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(2<i))return n.r+e.r;_(e,n,r=t[2]);var o,u,a,c,s,h,f,l=n.r*n.r,p=e.r*e.r,d=r.r*r.r,v=l+p+d,y=l*n.x+p*e.x+d*r.x,g=l*n.y+p*e.y+d*r.y;n=new A(n),e=new A(e),r=new A(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(a=3;a<i;++a){if(_(n._,e._,r=t[a]),r=new A(r),(s=n.previous)===(c=e.next)){if(x(c._,r._)){n=e,e=c,--a;continue t}}else{h=c._.r,f=s._.r;do{if(h<=f){if(x(c._,r._)){e=c,(n.next=e).previous=n,--a;continue t}h+=(c=c.next)._.r}else{if(x(s._,r._)){((n=s).next=e).previous=n,--a;continue t}f+=(s=s.previous)._.r}}while(c!==s.next)}for(r.previous=n,r.next=e,n.next=e.previous=e=r,v+=d=r._.r*r._.r,y+=d*r._.x,g+=d*r._.y,l=w(n._,o=y/v,u=g/v);(r=r.next)!==e;)(d=w(r._,o,u))<l&&(n=r,l=d);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=m(n),a=0;a<i;++a)(n=t[a]).x-=r.x,n.y-=r.y;return r.r}function v(t){if("function"!=typeof t)throw new Error;return t}function y(){return 0}function g(t){return function(){return t}}function u(t){return Math.sqrt(t.value)}function a(n){return function(t){t.children||(t.r=Math.max(0,+n(t)||0))}}function s(u,a){return function(t){if(n=t.children){var n,e,r,i=n.length,o=u(t)*a||0;if(o)for(e=0;e<i;++e)n[e].r+=o;if(r=c(n),o)for(e=0;e<i;++e)n[e].r-=o;t.r=r+o}}}function b(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function E(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function S(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(r-n)/t.value;++a<c;)(o=u[a]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s}d.prototype=n.prototype={constructor:d,each:function(t){var n,e,r,i,o=this,u=[o];do{for(n=u.reverse(),u=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)u.push(e[r])}while(u.length);return this},eachAfter:function(t){for(var n,e,r,i=this,o=[i],u=[];i=o.pop();)if(u.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=u.pop();)t(i);return this},eachBefore:function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;0<=e;--e)i.push(n[e]);return this},sum:function(i){return this.eachAfter(function(t){for(var n=+i(t.data)||0,e=t.children,r=e&&e.length;0<=--r;)n+=e[r].value;t.value=n})},sort:function(n){return this.eachBefore(function(t){t.children&&t.children.sort(n)})},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){var n=[];return this.each(function(t){n.push(t)}),n},leaves:function(){var n=[];return this.eachBefore(function(t){t.children||n.push(t)}),n},links:function(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e},copy:function(){return n(this).eachBefore(r)}};var B={depth:-1},M={};function i(t){return t.id}function k(t){return t.parentId}function z(t,n){return t.parent===n.parent?1:2}function O(t){var n=t.children;return n?n[0]:t.t}function T(t){var n=t.children;return n?n[n.length-1]:t.t}function R(t,n){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function C(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(i-e)/t.value;++a<c;)(o=u[a]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s}R.prototype=Object.create(d.prototype);var q=(1+Math.sqrt(5))/2;function D(t,n,e,r,i,o){for(var u,a,c,s,h,f,l,p,d,v,y,g,m=[],_=n.children,x=0,w=_.length,A=n.value;x<w;){for(s=i-e,h=o-r,l=p=f=_[x].value,g=f*f*(y=Math.max(h/s,s/h)/(A*t)),v=Math.max(p/g,g/l),c=x+1;c<w;++c){if(f+=a=_[c].value,a<l&&(l=a),p<a&&(p=a),g=f*f*y,v<(d=Math.max(p/g,g/l))){f-=a;break}v=d}m.push(u={value:f,dice:s<h,children:_.slice(x,c)}),u.dice?S(u,e,r,i,A?r+=h*f/A:o):C(u,e,r,A?e+=s*f/A:i,o),A-=f,x=c}return m}var P=function n(o){function t(t,n,e,r,i){D(o,t,n,e,r,i)}return t.ratio=function(t){return n(1<(t=+t)?t:1)},t}(q);var j=function n(p){function t(t,n,e,r,i){if((o=t._squarify)&&o.ratio===p)for(var o,u,a,c,s,h=-1,f=o.length,l=t.value;++h<f;){for(a=(u=o[h]).children,c=u.value=0,s=a.length;c<s;++c)u.value+=a[c].value;u.dice?S(u,n,e,r,e+=(i-e)*u.value/l):C(u,n,e,n+=(r-n)*u.value/l,i),l-=u.value}else t._squarify=o=D(p,t,n,e,r,i),o.ratio=p}return t.ratio=function(t){return n(1<(t=+t)?t:1)},t}(q);t.version="0.2.4",t.cluster=function(){var a=e,c=1,s=1,h=!1;function n(n){var e,r=0;n.eachAfter(function(t){var n=t.children;n?(t.x=function(t){return t.reduce(f,0)/t.length}(n),t.y=function(t){return 1+t.reduce(l,0)}(n)):(t.x=e?r+=a(t,e):0,t.y=0,e=t)});var t=function(t){for(var n;n=t.children;)t=n[0];return t}(n),i=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(n),o=t.x-a(t,i)/2,u=i.x+a(i,t)/2;return n.eachAfter(h?function(t){t.x=(t.x-n.x)*c,t.y=(n.y-t.y)*s}:function(t){t.x=(t.x-o)/(u-o)*c,t.y=(1-(n.y?t.y/n.y:1))*s})}return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(h=!1,c=+t[0],s=+t[1],n):h?null:[c,s]},n.nodeSize=function(t){return arguments.length?(h=!0,c=+t[0],s=+t[1],n):h?[c,s]:null},n},t.hierarchy=n,t.pack=function(){var n=null,e=1,r=1,i=y;function o(t){return t.x=e/2,t.y=r/2,n?t.eachBefore(a(n)).eachAfter(s(i,.5)).eachBefore(b(1)):t.eachBefore(a(u)).eachAfter(s(y,1)).eachAfter(s(i,t.r/Math.min(e,r))).eachBefore(b(Math.min(e,r)/(2*t.r))),t}return o.radius=function(t){return arguments.length?(n=function(t){return null==t?null:v(t)}(t),o):n},o.size=function(t){return arguments.length?(e=+t[0],r=+t[1],o):[e,r]},o.padding=function(t){return arguments.length?(i="function"==typeof t?t:g(+t),o):i},o},t.packSiblings=function(t){return c(t),t},t.packEnclose=m,t.partition=function(){var e=1,r=1,a=0,i=!1;function n(t){var n=t.height+1;return t.x0=t.y0=a,t.x1=e,t.y1=r/n,t.eachBefore(function(o,u){return function(t){t.children&&S(t,t.x0,o*(t.depth+1)/u,t.x1,o*(t.depth+2)/u);var n=t.x0,e=t.y0,r=t.x1-a,i=t.y1-a;r<n&&(n=r=(n+r)/2),i<e&&(e=i=(e+i)/2),t.x0=n,t.y0=e,t.x1=r,t.y1=i}}(r,n)),i&&t.eachBefore(E),t}return n.round=function(t){return arguments.length?(i=!!t,n):i},n.size=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.padding=function(t){return arguments.length?(a=+t,n):a},n},t.stratify=function(){var f=i,l=k;function n(t){var n,e,r,i,o,u,a,c=t.length,s=new Array(c),h={};for(e=0;e<c;++e)n=t[e],o=s[e]=new d(n),null!=(u=f(n,e,t))&&(u+="")&&(h[a="$"+(o.id=u)]=a in h?M:o);for(e=0;e<c;++e)if(o=s[e],null!=(u=l(t[e],e,t))&&(u+="")){if(!(i=h["$"+u]))throw new Error("missing: "+u);if(i===M)throw new Error("ambiguous: "+u);i.children?i.children.push(o):i.children=[o],o.parent=i}else{if(r)throw new Error("multiple roots");r=o}if(!r)throw new Error("no root");if(r.parent=B,r.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(p),r.parent=null,0<c)throw new Error("cycle");return r}return n.id=function(t){return arguments.length?(f=v(t),n):f},n.parentId=function(t){return arguments.length?(l=v(t),n):l},n},t.tree=function(){var _=z,s=1,h=1,f=null;function n(t){var n=function(t){for(var n,e,r,i,o,u=new R(t,0),a=[u];n=a.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;0<=i;--i)a.push(e=n.children[i]=new R(r[i],i)),e.parent=n;return(u.parent=new R(null,0)).children=[u],u}(t);if(n.eachAfter(l),n.parent.m=-n.z,n.eachBefore(p),f)t.eachBefore(d);else{var e=t,r=t,i=t;t.eachBefore(function(t){t.x<e.x&&(e=t),t.x>r.x&&(r=t),t.depth>i.depth&&(i=t)});var o=e===r?1:_(e,r)/2,u=o-e.x,a=s/(r.x+o+u),c=h/(i.depth||1);t.eachBefore(function(t){t.x=(t.x+u)*a,t.y=t.depth*c})}return t}function l(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n){!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;0<=--o;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+_(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+_(t._,r._));t.parent.A=function(t,n,e){if(n){for(var r,i=t,o=t,u=n,a=i.parent.children[0],c=i.m,s=o.m,h=u.m,f=a.m;u=T(u),i=O(i),u&&i;)a=O(a),(o=T(o)).a=t,0<(r=u.z+h-i.z-c+_(u._,i._))&&(g=t,m=e,l=(y=u).a.parent===g.parent?y.a:m,v=(d=r)/((p=t).i-l.i),p.c-=v,p.s+=d,l.c+=v,p.z+=d,p.m+=d,c+=r,s+=r),h+=u.m,c+=i.m,f+=a.m,s+=o.m;u&&!T(o)&&(o.t=u,o.m+=h-s),i&&!O(a)&&(a.t=i,a.m+=c-f,e=t)}var l,p,d,v,y,g,m;return e}(t,r,t.parent.A||e[0])}function p(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function d(t){t.x*=s,t.y=t.depth*h}return n.separation=function(t){return arguments.length?(_=t,n):_},n.size=function(t){return arguments.length?(f=!1,s=+t[0],h=+t[1],n):f?null:[s,h]},n.nodeSize=function(t){return arguments.length?(f=!0,s=+t[0],h=+t[1],n):f?[s,h]:null},n},t.treemap=function(){var u=P,n=!1,e=1,r=1,a=[0],c=y,s=y,h=y,f=y,l=y;function i(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(o),a=[0],n&&t.eachBefore(E),t}function o(t){var n=a[t.depth],e=t.x0+n,r=t.y0+n,i=t.x1-n,o=t.y1-n;i<e&&(e=i=(e+i)/2),o<r&&(r=o=(r+o)/2),t.x0=e,t.y0=r,t.x1=i,t.y1=o,t.children&&(n=a[t.depth+1]=c(t)/2,e+=l(t)-n,r+=s(t)-n,(i-=h(t)-n)<e&&(e=i=(e+i)/2),(o-=f(t)-n)<r&&(r=o=(r+o)/2),u(t,e,r,i,o))}return i.round=function(t){return arguments.length?(n=!!t,i):n},i.size=function(t){return arguments.length?(e=+t[0],r=+t[1],i):[e,r]},i.tile=function(t){return arguments.length?(u=v(t),i):u},i.padding=function(t){return arguments.length?i.paddingInner(t).paddingOuter(t):i.paddingInner()},i.paddingInner=function(t){return arguments.length?(c="function"==typeof t?t:g(+t),i):c},i.paddingOuter=function(t){return arguments.length?i.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):i.paddingTop()},i.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:g(+t),i):s},i.paddingRight=function(t){return arguments.length?(h="function"==typeof t?t:g(+t),i):h},i.paddingBottom=function(t){return arguments.length?(f="function"==typeof t?t:g(+t),i):f},i.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:g(+t),i):l},i},t.treemapBinary=function(t,n,e,r,i){var o=t.children;!function t(n,e,r,i,o,u,a,c){if(r-1<=e)return(n=n[e]).x0=o,n.y0=u,n.x1=a,void(n.y1=c);for(var s=e,h=i/2,f=0;f+=n[s].value,++s<r-1&&f<h;);var l=i-f;if(a-o<c-u){var p=(u*l+c*f)/i;t(n,e,s,f,o,u,a,p),t(n,s,r,l,o,p,a,c)}else{var d=(o*l+a*f)/i;t(n,e,s,f,o,u,d,c),t(n,s,r,l,d,u,a,c)}}(o,0,o.length,t.value,n,e,r,i)},t.treemapDice=S,t.treemapSlice=C,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?C:S)(t,n,e,r,i)},t.treemapSquarify=P,t.treemapResquarify=j},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3_hierarchy=r.d3_hierarchy||{})},{}],4:[function(t,n,e){var r,i;r=this,i=function(o){"use strict";var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function u(t){var n=t+="",e=n.indexOf(":");return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),i.hasOwnProperty(n)?{space:i[n],local:t}:t}function a(t){var n=u(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}})(n)}var t=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var n=document.documentElement;if(!n.matches){var e=n.webkitMatchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector;t=function(t){return function(){return e.call(this,t)}}}}var h=t,l={};o.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(l={mouseenter:"mouseover",mouseleave:"mouseout"}));function p(e,t,n){return e=d(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function d(e,r,i){return function(t){var n=o.event;o.event=t;try{e.call(this,this.__data__,r,i)}finally{o.event=n}}}function f(o){return function(){var t=this.__on;if(t){for(var n,e=0,r=-1,i=t.length;e<i;++e)n=t[e],o.type&&n.type!==o.type||n.name!==o.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function v(c,s,h){var f=l.hasOwnProperty(c.type)?p:d;return function(t,n,e){var r,i=this.__on,o=f(s,n,e);if(i)for(var u=0,a=i.length;u<a;++u)if((r=i[u]).type===c.type&&r.name===c.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=h),void(r.value=s);this.addEventListener(c.type,o,h),r={type:c.type,name:c.name,value:s,listener:o,capture:h},i?i.push(r):this.__on=[r]}}function c(){for(var t,n=o.event;t=n.sourceEvent;)n=t;return n}function s(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function y(t){return function(){return this.querySelector(t)}}function g(t){return function(){return this.querySelectorAll(t)}}var m="$";function w(t,n,e,r,i,o){for(var u,a=0,c=n.length,s=o.length;a<s;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new _(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function A(t,n,e,r,i,o,u){var a,c,s,h={},f=n.length,l=o.length,p=new Array(f);for(a=0;a<f;++a)(c=n[a])&&(p[a]=s=m+u.call(c,c.__data__,a,n),s in h?i[a]=c:h[s]=c);for(a=0;a<l;++a)(c=h[s=m+u.call(t,o[a],a,o)])?((r[a]=c).__data__=o[a],h[s]=null):e[a]=new _(t,o[a]);for(a=0;a<f;++a)(c=n[a])&&h[p[a]]===c&&(i[a]=c)}function _(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function x(t){return new Array(t.length)}function b(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function E(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function S(t){return t.trim().split(/^|\s+/)}function B(t){return t.classList||new M(t)}function M(t){this._node=t,this._names=S(t.getAttribute("class")||"")}function k(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function z(t,n){for(var e=B(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function O(){this.textContent=""}function T(){this.innerHTML=""}function R(){this.nextSibling&&this.parentNode.appendChild(this)}function C(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q(){return null}function D(){var t=this.parentNode;t&&t.removeChild(this)}function P(t,n,e){var r=E(t),i=r.CustomEvent;i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}_.prototype={constructor:_,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},M.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);0<=n&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var j=[null];function L(t,n){this._groups=t,this._parents=n}function N(){return new L([[document.documentElement]],j)}L.prototype=N.prototype={constructor:L,select:function(t){"function"!=typeof t&&(t=y(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],c=a.length,s=r[i]=new Array(c),h=0;h<c;++h)(o=a[h])&&(u=t.call(o,o.__data__,h,a))&&("__data__"in o&&(u.__data__=o.__data__),s[h]=u);return new L(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=g(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],c=a.length,s=0;s<c;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new L(r,i)},filter:function(t){"function"!=typeof t&&(t=h(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=new Array(a),s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&(c[s]=o);return new L(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var e=n?A:w,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var h=r[s],f=i[s],l=f.length,p=t.call(h,h&&h.__data__,s,r),d=p.length,v=a[s]=new Array(d),y=u[s]=new Array(d);e(h,f,v,y,c[s]=new Array(l),p,n);for(var g,m,_=0,x=0;_<d;++_)if(g=v[_]){for(x<=_&&(x=_+1);!(m=y[x])&&++x<d;);g._next=m||null}}return(u=new L(u,r))._enter=a,u._exit=c,u},enter:function(){return new L(this._enter||this._groups.map(x),this._parents)},exit:function(){return new L(this._exit||this._groups.map(x),this._parents)},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],h=e[a],f=s.length,l=u[a]=new Array(f),p=0;p<f;++p)(c=s[p]||h[p])&&(l[p]=c);for(;a<r;++a)u[a]=n[a];return new L(u,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];0<=--o;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=b);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],c=a.length,s=i[o]=new Array(c),h=0;h<c;++h)(u=a[h])&&(s[h]=u);s.sort(t)}return new L(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=u(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}:function(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){var r;return 1<arguments.length?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(n,e,r){return function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):E(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},property:function(t,n){return 1<arguments.length?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=S(t+"");if(arguments.length<2){for(var r=B(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?k:z)(this,t)}}:n?function(t){return function(){k(this,t)}}:function(t){return function(){z(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?O:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(R)},lower:function(){return this.each(C)},append:function(t,n){var e="function"==typeof t?t:a(t);return this.select(arguments.length<2?function(t){return function(){return this.appendChild(t.apply(this,arguments))}}(e):function(t,n){return function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)}}(e,null==n?q:"function"==typeof n?n:y(n)))},remove:function(){return this.each(D)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return 0<=e&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),u=o.length;if(!(arguments.length<2)){for(a=n?v:f,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,s=0,h=a.length;s<h;++s)for(r=0,c=a[s];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return P(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return P(this,t,n)}})(t,n))}},o.version="0.7.3",o.creator=a,o.matcher=h,o.mouse=function(t){var n=c();return n.changedTouches&&(n=n.changedTouches[0]),s(t,n)},o.namespace=u,o.namespaces=i,o.select=function(t){return"string"==typeof t?new L([[document.querySelector(t)]],[document.documentElement]):new L([[t]],j)},o.selectAll=function(t){return"string"==typeof t?new L([document.querySelectorAll(t)],[document.documentElement]):new L([t],j)},o.selection=N,o.selector=y,o.selectorAll=g,o.touch=function(t,n,e){arguments.length<3&&(e=n,n=c().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return s(t,r);return null},o.touches=function(t,n){null==n&&(n=c().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=s(t,n[e]);return i},o.window=E,o.customEvent=function(t,n,e,r){var i=o.event;t.sourceEvent=o.event,o.event=t;try{return n.apply(e,r)}finally{o.event=i}}},"object"==typeof e&&void 0!==n?i(e):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3_selection=r.d3_selection||{})},{}],5:[function(t,n,e){!function(t){var e=document.location;function i(){return""===e.hash||"#"===e.hash}var o={mode:"modern",hash:e.hash,history:!1,check:function(){var t=e.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?!0===this.history?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,n){var e=this;function r(t){for(var n=0,e=u.listeners.length;n<e;n++)u.listeners[n](t)}if(this.history=n,u.listeners||(u.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode))!0===this.history?setTimeout(function(){window.onpopstate=r},500):window.onhashchange=r,this.mode="modern";else{var i=document.createElement("iframe");i.id="state-frame",i.style.display="none",document.body.appendChild(i),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&e.check()}),window.setInterval(function(){e.check()},50),this.onHashChanged=r,this.mode="legacy"}return u.listeners.push(t),this.mode},destroy:function(t){if(u&&u.listeners)for(var n=u.listeners,e=n.length-1;0<=e;e--)n[e]===t&&n.splice(e,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),!0===this.history?(window.history.pushState({},document.title,t),this.fire()):e.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var n=document.getElementById("state-frame"),e=n.contentDocument||n.contentWindow.document;e.open(),e.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),e.close()},syncHash:function(){var t=this._hash;return t!=e.hash&&(e.hash=t),this},onHashChanged:function(){}},u=t.Router=function(t){if(!(this instanceof u))return new u(t);this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{})};function a(t,n){for(var e=0;e<t.length;e+=1)if(!1===n(t[e],e,t))return}function r(t){for(var n=[],e=0,r=t.length;e<r;e++)n=n.concat(t[e]);return n}function c(e,t,r){if(!e.length)return r();var i=0;!function n(){t(e[i],function(t){t||!1===t?(r(t),r=function(){}):(i+=1)===e.length?r():n()})}()}function h(t,n,e){for(var r in e=t,n)if(n.hasOwnProperty(r)&&(e=n[r](t))!==t)break;return e===t?"([._a-zA-Z0-9-%()]+)":e}function f(t,n,e,r){var i,o=0,u=0,a=0;e=(e||"(").toString(),r=(r||")").toString();for(i=0;i<t.length;i++){var c=t[i];if(c.indexOf(e,o)>c.indexOf(r,o)||~c.indexOf(e,o)&&!~c.indexOf(r,o)||!~c.indexOf(e,o)&&~c.indexOf(r,o)){if(u=c.indexOf(e,o),a=c.indexOf(r,o),~u&&!~a||!~u&&~a)t=[t.slice(0,(i||1)+1).join(n)].concat(t.slice((i||1)+1));o=(u<a?a:u)+1,i=0}else o=0}return t}u.prototype.init=function(t){var n,r=this;return this.handler=function(t){var n=t&&t.newURL||window.location.hash,e=!0===r.history?r.getPath():n.replace(/.*#/,"");r.dispatch("on","/"===e.charAt(0)?e:"/"+e)},o.init(this.handler,this.history),!1===this.history?i()&&t?e.hash=t:i()||r.dispatch("on","/"+e.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(n=i()&&t?t:i()?null:e.hash.replace(/^#/,""))&&window.history.replaceState({},document.title,n):n=this.getPath(),!n&&!0!==this.run_in_init||this.handler()),this},u.prototype.explode=function(){var t=!0===this.history?this.getPath():e.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},u.prototype.setRoute=function(t,n,e){var r=this.explode();return"number"==typeof t&&"string"==typeof n?r[t]=n:"string"==typeof e?r.splice(t,n,s):r=[t],o.setHash(r.join("/")),r},u.prototype.insertEx=function(t,n,e,r){var i,o;return"once"===t&&(i=e,o=!(t="on"),e=function(){if(!o)return o=!0,i.apply(this,arguments)}),this._insert(t,n,e,r)},u.prototype.getRoute=function(t){var n=t;if("number"==typeof t)n=this.explode()[t];else if("string"==typeof t){n=this.explode().indexOf(t)}else n=this.explode();return n},u.prototype.destroy=function(){return o.destroy(this.handler),this},u.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t};var l=/\?.*/;u.prototype.configure=function(t){t=t||{};for(var n=0;n<this.methods.length;n++)this._methods[this.methods[n]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict=void 0===t.strict||t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=!0===this.history&&!1!==t.run_handler_in_init,this.convert_hash_in_init=!0===this.history&&!1!==t.convert_hash_in_init,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},u.prototype.param=function(t,n){":"!==t[0]&&(t=":"+t);var e=new RegExp(t,"g");return this.params[t]=function(t){return t.replace(e,n.source||n)},this},u.prototype.on=u.prototype.route=function(n,e,r){var i=this;return r||"function"!=typeof e||(r=e,e=n,n="on"),Array.isArray(e)?e.forEach(function(t){i.on(n,t,r)}):(e.source&&(e=e.source.replace(/\\\//gi,"/")),Array.isArray(n)?n.forEach(function(t){i.on(t.toLowerCase(),e,r)}):(e=f(e=e.split(new RegExp(this.delimiter)),this.delimiter),void this.insert(n,this.scope.concat(e),r)))},u.prototype.path=function(t,n){var e=this.scope.length;t.source&&(t=t.source.replace(/\\\//gi,"/")),t=f(t=t.split(new RegExp(this.delimiter)),this.delimiter),this.scope=this.scope.concat(t),n.call(this,this),this.scope.splice(e,t.length)},u.prototype.dispatch=function(t,n,e){var r,i=this,o=this.traverse(t,n.replace(l,""),this.routes,""),u=this._invoked;if(this._invoked=!0,!o||0===o.length)return this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:n},e),!1;function a(){i.last=o.after,i.invoke(i.runlist(o),i,e)}return"forward"===this.recurse&&(o=o.reverse()),(r=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last])&&0<r.length&&u?this.async?this.invoke(r,this,a):(this.invoke(r,this),a()):a(),!0},u.prototype.invoke=function(e,r,t){var i,n=this;this.async?c(e,i=function(t,n){if(Array.isArray(t))return c(t,i,n);"function"==typeof t&&t.apply(r,(e.captures||[]).concat(n))},function(){t&&t.apply(r,arguments)}):a(e,i=function(t){return Array.isArray(t)?a(t,i):"function"==typeof t?t.apply(r,e.captures||[]):void("string"==typeof t&&n.resource&&n.resource[t].apply(r,e.captures||[]))})},u.prototype.traverse=function(t,n,e,r,i){var o,u,a,c,s=[];function h(t){if(!i)return t;var n=function t(n){for(var e=[],r=0;r<n.length;r++)e[r]=Array.isArray(n[r])?t(n[r]):n[r];return e}(t);return n.matched=t.matched,n.captures=t.captures,n.after=t.after.filter(i),function t(n){for(var e=n.length-1;0<=e;e--)Array.isArray(n[e])?(t(n[e]),0===n[e].length&&n.splice(e,1)):i(n[e])||n.splice(e,1)}(n),n}if(n===this.delimiter&&e[t])return(c=[[e.before,e[t]].filter(Boolean)]).after=[e.after].filter(Boolean),c.matched=!0,c.captures=[],h(c);for(var f in e)if(e.hasOwnProperty(f)&&(!this._methods[f]||this._methods[f]&&"object"==typeof e[f]&&!Array.isArray(e[f]))){if(o=u=r+this.delimiter+f,this.strict||(u+="["+this.delimiter+"]?"),!(a=n.match(new RegExp("^"+u))))continue;if(a[0]&&a[0]==n&&e[f][t])return(c=[[e[f].before,e[f][t]].filter(Boolean)]).after=[e[f].after].filter(Boolean),c.matched=!0,c.captures=a.slice(1),this.recurse&&e===this.routes&&(c.push([e.before,e.on].filter(Boolean)),c.after=c.after.concat([e.after].filter(Boolean))),h(c);if((c=this.traverse(t,n,e[f],o)).matched)return 0<c.length&&(s=s.concat(c)),this.recurse&&(s.push([e[f].before,e[f].on].filter(Boolean)),c.after=c.after.concat([e[f].after].filter(Boolean)),e===this.routes&&(s.push([e.before,e.on].filter(Boolean)),c.after=c.after.concat([e.after].filter(Boolean)))),s.matched=!0,s.captures=c.captures,s.after=c.after,h(s)}return!1},u.prototype.insert=function(t,n,e,r){var i,o,u,a;if(n=n.filter(function(t){return t&&0<t.length}),r=r||this.routes,a=n.shift(),/\:|\*/.test(a)&&!/\\d|\\w/.test(a)&&(a=function(t,n){for(var e,r=0,i="";e=t.substr(r).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)r=e.index+e[0].length,e[0]=e[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),i+=t.substr(0,e.index)+e[0];var o,u,a=(t=i+=t.substr(r)).match(/:([^\/]+)/gi);if(a){u=a.length;for(var c=0;c<u;c++)t="::"===(o=a[c]).slice(0,2)?o.slice(1):t.replace(o,h(o,n))}return t}(a,this.params)),0<n.length)return r[a]=r[a]||{},this.insert(t,n,e,r[a]);if(a||n.length||r!==this.routes){if(i=typeof r[a],o=Array.isArray(r[a]),r[a]&&!o&&"object"==i)switch(typeof r[a][t]){case"function":return void(r[a][t]=[r[a][t],e]);case"object":return void r[a][t].push(e);case"undefined":return void(r[a][t]=e)}else if("undefined"==i)return(u={})[t]=e,void(r[a]=u);throw new Error("Invalid route context: "+i)}switch(typeof r[t]){case"function":return void(r[t]=[r[t],e]);case"object":return void r[t].push(e);case"undefined":return void(r[t]=e)}},u.prototype.extend=function(t){var n,e=this,r=t.length;function i(n){e._methods[n]=!0,e[n]=function(){var t=1===arguments.length?[n,""]:[n];e.on.apply(e,t.concat(Array.prototype.slice.call(arguments)))}}for(n=0;n<r;n++)i(t[n])},u.prototype.runlist=function(t){var n=this.every&&this.every.before?[this.every.before].concat(r(t)):r(t);return this.every&&this.every.on&&n.push(this.every.on),n.captures=t.captures,n.source=t.source,n},u.prototype.mount=function(a,t){if(a&&"object"==typeof a&&!Array.isArray(a)){var c=this;for(var n in t=t||[],Array.isArray(t)||(t=t.split(c.delimiter)),a)a.hasOwnProperty(n)&&e(n,t.slice(0))}function e(t,n){var e=t,r=t.split(c.delimiter),i=typeof a[t],o=""===r[0]||!c._methods[r[0]],u=o?"on":e;if(o&&(e=e.slice((e.match(new RegExp("^"+c.delimiter))||[""])[0].length),r.shift()),o&&"object"==i&&!Array.isArray(a[t]))return n=n.concat(r),void c.mount(a[t],n);o&&(n=f(n=n.concat(e.split(c.delimiter)),c.delimiter)),c.insert(u,n,a[t])}}}("object"==typeof e?e:window)},{}],6:[function(t,n,e){function r(t){var n=Math.random,u=!0;function o(t){return Math.floor(n()*t)}function e(t){var n=t,e=n[n.length-1][0][1]-n[0][0][0]+1;function r(t){return function(t,n){n=+n;for(var e=0;e<t.length;++e){var r=t[e],i=r[0];if(n>=i[0]&&n<=i[1])return r[1]}}(n,t)}return{outcomeAtIndex:r,roll:function(){var t=r(o(e));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:e,getRangesAndOutcomesArray:function(){return n}}}function r(t){var o=[],u=-1,n=function(t){var n=[];for(var e in t){var r=t[e];n.push([r,e])}return n}(t);return(n=n.sort(i)).forEach(function(t){var n=t[0],e=t[1],r=u+1,i=r+n-1;o.push([[r,i],e]),u=i}),o}function i(t,n){return t[0]>n[0]?-1:1}function a(t){return e(function(t){var n=[];for(var e in t){var r=s(e),i=t[e];if("object"==typeof i)if(Array.isArray(i))i=l(i);else if(u){var o=a(i);"function"==typeof o.roll&&(i=o.roll)}n.push([r,i])}return n.sort(c)}(t))}function c(t,n){return t[0][0]<n[0][0]?-1:1}function s(t){var n=t.split("-");if(!(2<n.length))return 1===n.length?[+t,+t]:[+n[0],+n[1]]}function h(t){return e(function(t){var u=0;return t.map(function(t){var n=t[0],e=t[1],r=u+n-1,i=[u,r];if(u=1+r,Array.isArray(e))if(function(t){return Array.isArray(t)&&0<t.length&&Array.isArray(t[0])&&2===t[0].length&&"number"==typeof t[0][0]}(e)){var o=h(e);"function"==typeof o.roll&&(e=o.roll)}else e=l(e);return[i,e]})}(t))}function f(t,n){return!t||"number"!=typeof t.length||t.length<1?n:t[o(t.length)]}function l(t,n){return function(){return f(t,n)}}function p(t,e){var r=[];return t.forEach(function(n){e.forEach(function(t){Array.isArray(n)||Array.isArray(t)?r.push(n.concat(t)):r.push([n,t])})}),r}function d(t){for(var n,e=t.length,r=Array(e),i=0;i<e;i++)(n=o(i+1))!==i&&(r[i]=r[n]),r[n]=t[i];return r}return t&&(t.random&&(n=t.random),void 0!==t.recurse&&(u=t.recurse)),{roll:o,rollDie:function(t){return 0===t?0:o(t)+1},createRangeTable:e,createRangeTableFromDict:function(t){return e(r(t))},createTableFromDef:a,createTableFromSizes:h,convertDictToRangesAndOutcomePairs:r,pickFromArray:f,crossArrays:p,getCartesianProduct:function(t){return t.slice(1).reduce(p,t[0])},shuffle:d,sample:function(t,n){return d(t).slice(0,n)},randomFn:n}}var i=r();"object"==typeof n&&(n.exports=i,n.exports.createProbable=r)},{}]},{},[1]);